import * as React from 'react'
import { Observable } from 'rxjs'
import { Atom, F, bind } from '@grammarly/focal'

 /* tslint:disable */
const defaultLanguagesList = [
  '@Formula', 'A', 'A# (Axiom)', 'A# .NET', 'A+', 'A++', 'A-0 System', 'ABAP', 'ABC', 'ABC ALGOL', 'ABLE', 'ABSET', 'ABSYS', 'ACC', 'ACL2', 'ACT-III', 'AIMMS', 'ALF', 'ALGOL 58', 'ALGOL 60', 'ALGOL 68', 'ALGOL W', 'AMOS', 'AMPL', 'APL', 'AROS', 'ARexx', 'ATS', 'AWK', 'Accent', 'Ace DASL', 'Action!', 'ActionScript', 'Ada', 'Adenine', 'Agda', 'Agilent VEE', 'Agora', 'Alef', 'Algorithms', 'Alice', 'Alma-0', 'Alphabetical', 'AmbientTalk', 'Amiga E', 'Analysis', 'Analytical', 'Analytics', 'Analyze Data', 'Analyze Technical Issues', 'Answer Calls', 'Apex (Salesforce.com)', 'App Inventor for Android\'s visual block language', 'AppleScript', 'Application Development', 'Application Development Methodologies', 'Application Development Techniques', 'Application Development Tools', 'Application Installations', 'Application Programming Interfaces', 'Application Support', 'Applications', 'Apps', 'Arc', 'Architecture', 'Argus', 'Ars Based Programming', 'Aspect Oriented Programming', 'AspectJ', 'Assembling', 'Assembly language', 'Assess Customer Support Needs', 'Ateji PX', 'Attention to Detail', 'AutoHotkey', 'AutoIt', 'AutoLISP / Visual LISP', 'Autocoder', 'Averest', 'Axum', 'B', 'B', 'BASIC', 'BCPL', 'BETA', 'BLISS', 'BPEL', 'BREW', 'Babbage', 'Balancing', 'Bash', 'Batch (Windows/Dos)', 'BeanShell', 'Bertrand', 'Best Practices', 'Big Data', 'Bigwig', 'Bistro', 'BitC', 'Blue', 'Boo', 'Boomerang', 'Bourne shell (including bash and ksh)', 'Browsers', 'Business Analytics', 'Business Intelligence', 'Business Process Modeling', 'C', 'C', 'C Shell', 'C# – ISO/IEC 23270', 'C++ – ISO/IEC 14882', 'C--', 'C/AL', 'CASE Tools', 'CDuce', 'CFEngine', 'CFML', 'CHAIN', 'CHILL', 'CHIP-8', 'CICS', 'CL (IBM)', 'CLIST', 'CLU', 'CMS EXEC (EXEC)', 'CMS-2', 'COBOL – ISO/IEC 1989', 'CODE', 'COMAL', 'COMIT', 'COMPASS', 'COWSEL', 'CPL', 'CSP', 'CUDA', 'Caché ObjectScript', 'Calculating', 'Caml', 'Case Notes', 'Categorical', 'Cayenne', 'Cecil', 'Cel', 'Certifications', 'Cesil', 'Ceylon', 'Cg', 'Ch', 'Chapel', 'Charity', 'Charm', 'Chef', 'Chronological', 'ChucK', 'Cilk', 'Claire', 'Clarion', 'Clean', 'Clipper', 'Clojure', 'Cloud Computing', 'Cobra', 'Code', 'Coding', 'CoffeeScript', 'Cola', 'ColdC', 'ColdFusion', 'Collaboration', 'Combined Programming Language (CPL)', 'Common Intermediate Language (CIL)', 'Common Lisp (also known as CL)', 'Communication', 'Compiling Statistics', 'Component Pascal', 'Components', 'Comprehending Technical Documents', 'Computer', 'Computer Platforms', 'Computer Science', 'Computing', 'Concurrent Programming', 'Conducting Online Chats', 'Configuration', 'Conflict Resolution', 'Constraint Handling Rules (CHR)', 'Constraint-based Programming', 'Content Management', 'Content Management Systems (CMS)', 'Content Strategy', 'Converge', 'Convincing Customers to Stay with Platforms', 'Cool', 'Coq', 'CorVision', 'Coral 66', 'Corn', 'Creative Thinking', 'Critical Thinking', 'Cryptol', 'Csound', 'Curl', 'Curry', 'Customer Service', 'Customer Support', 'Cyclone', 'Cython', 'D', 'D', 'DASL (Datapoint\'s Advanced Systems Language)', 'DASL (Distributed Application Specification Language)', 'DATATRIEVE', 'DCL', 'DIBOL', 'DRAKON', 'DYNAMO', 'Dart', 'Data', 'Data Analysis', 'Data Analytics', 'Data Intelligence', 'Data Migration', 'Data Mining', 'Data Science', 'Data Settings', 'Data Storage', 'Data Strategy', 'Data Structures', 'Data Visualizations', 'DataFlex', 'Database', 'Database Administration', 'Database Design', 'Database Management', 'Database Management Systems (DBMS)', 'Database Techniques', 'Databases', 'Datalog', 'Debugging', 'Decision Making', 'Deductive Reasoning', 'Deesel (formerly G)', 'Delphi', 'Design', 'Design Principles', 'Design Prototypes', 'Design Specifications', 'Design Tools', 'Desktop Support', 'Detail Oriented', 'Developer', 'Development', 'Development Tools', 'Diagnosing Hardware', 'Diagnosing Software', 'DinkC', 'Document', 'Document Bugs', 'Document Issues', 'Documentation', 'Dog', 'Draco', 'Drilling', 'Driving', 'Dylan', 'E', 'E', 'E#', 'EASYTRIEVE PLUS', 'ECMAScript', 'EGL', 'ELAN', 'EPL', 'ESPOL', 'EXEC 2', 'Ease', 'Easy PL/I', 'Easy Programming Language', 'Edinburgh IMP', 'Eiffel', 'Electronics', 'Elixir', 'Elm', 'Emacs Lisp', 'Email', 'Embedded Hardware', 'Emerald', 'Emerging Technologies', 'Empathy', 'End User Support', 'Engineering', 'Enterprise Systems', 'Epigram', 'Erlang', 'Error Logs', 'Escalate Issues', 'Escher', 'Esterel', 'Etoys', 'Euclid', 'Euler', 'Euphoria', 'EusLisp Robot Programming Language', 'Excel', 'Executable UML', 'Explaining Technical Information Clearly', 'F', 'F', 'F#', 'F-Script', 'FAUST', 'FFP', 'FL', 'FLOW-MATIC', 'FOCAL', 'FOCUS', 'FOIL', 'FORMAC', 'FP', 'FPr', 'Fabrication', 'Factor', 'Falcon', 'Fantom', 'File Systems', 'Finishing', 'First Level Support', 'Fjölnir', 'Flavors', 'Flex', 'Flexibility', 'Follow Scripts', 'Follow Specifications', 'Follow Technical Instructions', 'Forth', 'Fortran – ISO/IEC 1539', 'Fortress', 'Fourth Generation Languages', 'FoxBase', 'FoxPro', 'Franz Lisp', 'Frege', 'Friendly Demeanor', 'Front End Design', 'G', 'G', 'G-code', 'GAMS', 'GAP', 'GDL', 'GEORGE', 'GJ', 'GLSL', 'GM', 'GNU E', 'GOAL', 'GOM (Good Old Mad)', 'GOTRAN', 'GPSS', 'GRASS', 'Game Maker Language', 'GameMonkey Script', 'Generational', 'Genie', 'Go', 'Go!', 'Godiva', 'Goo', 'Google Analytics', 'Google Apps Script', 'Gosu', 'GraphTalk', 'Grinding', 'Groovy', 'Gödel', 'H', 'HAL/S', 'HLSL', 'HTML Authoring Tools', 'HTML Conversion Tools', 'Hack', 'Hamilton C shell', 'Harbour', 'Hardware', 'Hardware Upgrades', 'Hartmann pipelines', 'Haskell', 'Haxe', 'Help Desk', 'Help Desk Reporting Systems', 'High Level Assembly', 'Hop', 'Hope', 'Hugo', 'Hume', 'HyperTalk', 'I', 'IBM Basic assembly language', 'IBM HAScript', 'IBM Informix-4GL', 'IBM RPG', 'ICI', 'IDL', 'IMP', 'IPL', 'IPTSCRAE', 'ISLISP', 'ISPF', 'ISWIM', 'IT Manager', 'IT Optimization', 'IT Security', 'IT Soft Skills', 'IT Solutions', 'IT Support', 'Icon', 'Id', 'Identify Process Improvements', 'Identify Solutions', 'Idris', 'Implementation', 'Industry Systems', 'Inform', 'Information Architecture', 'Information Design', 'Information Systems', 'Information Technology', 'Infrastructure', 'Installation', 'Installing Systems', 'Integrated Technologies', 'Interacting Calmly with Agitated Customers', 'Interaction Design', 'Interaction Flows', 'Interface with Clients', 'Interface with Vendors', 'Internet', 'Interpersonal', 'Io', 'Ioke', 'J', 'J', 'J#', 'J++', 'JADE', 'JAL', 'JASS', 'JCL', 'JEAN', 'JOSS', 'JOVIAL', 'JScript', 'JScript .NET', 'Jako', 'Janus', 'Java', 'JavaFX Script', 'JavaScript', 'Join Java', 'Joule', 'Joy', 'Julia', 'Jython', 'K', 'K', 'KEE', 'KIF', 'KRC', 'KRL', 'KRL (KUKA Robot Language)', 'KRYPTON', 'Kaleidoscope', 'Karel', 'Karel++', 'Kixtart', 'Klerer-May System', 'Kojo', 'Kotlin', 'L', 'L', 'L# .NET', 'LANSA', 'LC-3', 'LIL', 'LINC', 'LIS', 'LISA', 'LPC', 'LSE', 'LSL', 'LYaPAS', 'LaTeX', 'LabVIEW', 'Ladder', 'Lagoona', 'Languages', 'Lasso', 'Lava', 'Leadership', 'Leda', 'Legoscript', 'LilyPond', 'Limbo', 'Limnor', 'Lingo', 'Linoleum', 'Linux', 'Lisaac', 'Lisp – ISO/IEC 13816', 'Listening', 'Lite-C', 'Lithe', 'Little b', 'LiveCode', 'LiveScript', 'Logic', 'Logical Thinking', 'Logo', 'Logtalk', 'LotusScript', 'Lua', 'Lucid', 'Lustre', 'Lynx', 'M', 'M#', 'M2001', 'M4', 'MAD (Michigan Algorithm Decoder)', 'MAD/I', 'MAPPER now part of BIS', 'MARK-IV now VISION:BUILDER', 'MASM Microsoft Assembly x86', 'MATLAB', 'MDL', 'MIIS', 'MIMIC', 'MIVA Script', 'ML', 'MOO', 'MPD', 'MSIL – deprecated name for CIL', 'MSL', 'MUMPS', 'Mac OS', 'MacOS', 'Machine code', 'Magik', 'Magma', 'Maintain Composure', 'Maintenance', 'Management', 'Managing Customer Expectations', 'Manual Dexterity', 'Maple', 'Mary', 'Math', 'Mathematica', 'Max (Max Msp – Graphical Programming Environment)', 'MaxScript internal language 3D Studio Max', 'Maxima (see also Macsyma)', 'Maya (MEL)', 'Mechanical', 'Mechanical Reasoning', 'Meeting Deadlines', 'Mentoring Junior Staff', 'Mercury', 'Mesa', 'Messaging', 'Metacard', 'Metafont', 'Methodology', 'Metrics', 'MicroScript', 'Microcode', 'Microsoft Office', 'MillScript', 'Mirah', 'Miranda', 'Mobile', 'Mobile Applications', 'Mobile Devices', 'Moby', 'Mock Ups', 'Model 204', 'Modelica', 'Modeling', 'Modification', 'Modula', 'Modula-2', 'Modula-3', 'Mohol', 'Mortran', 'Motivation', 'Mouse', 'Multi-Tasking', 'Multimedia', 'Multitasking', 'Mystic Programming Language (MPL)', 'N', 'NASM', 'NATURAL', 'NESL', 'NEWP', 'NGL', 'NPL', 'NSIS', 'NWScript', 'NXT-G', 'Napier88', 'Needs Analysis', 'Neko', 'Nemerle', 'Net.Data', 'NetLogo', 'NetRexx', 'Network Architecture', 'Network Operations', 'Network Security', 'Networking', 'Networks', 'New Technologies', 'NewLISP', 'Newspeak', 'NewtonScript', 'Nial', 'Nice', 'Nickle', 'Nim', 'Not Quite C (NQC)', 'Not eXactly C (NXC)', 'Nu', 'O', 'OBJ2', 'OCaml', 'OPL', 'OPS5', 'ORCA/Modula-2', 'OS Programming', 'Oak', 'Oberon', 'Object Lisp', 'Object Pascal', 'Object REXX', 'ObjectLOGO', 'Objective-C', 'Objective-J', 'Obliq', 'Octave', 'OmniMark', 'Ongoing Learning about Products', 'Onyx', 'Opa', 'Opal', 'OpenCL', 'OpenEdge ABL', 'Operating Systems', 'Operations', 'OptimJ', 'Optimizing', 'Optimizing User Experiences', 'Optimizing Website Performance', 'Orc', 'Organization', 'Organizational', 'Oriel', 'Orwell', 'Outlook', 'Oxygene', 'Oz', 'P', 'P#', 'PARI/GP', 'PCASTL', 'PCF', 'PDL', 'PEARL', 'PHP', 'PIKT', 'PILOT', 'PL-11', 'PL/0', 'PL/B', 'PL/C', 'PL/I – ISO 6160', 'PL/M', 'PL/P', 'PL/SQL', 'PL360', 'PLANC', 'PLEX', 'PLEXIL', 'POP-11', 'PPL', 'PROIV', 'PROMAL', 'PROSE modeling language', 'PROTEL', 'ParaSail (programming language)', 'Parallel Processing', 'Pascal – ISO 7185', 'Patience', 'People Skills', 'PeopleCode', 'Performance', 'Perl', 'Perl6', 'Personal', 'Personas', 'Photography', 'Phrogram', 'Physics', 'Pico', 'Picolisp', 'Pict', 'Pike', 'Pipelines', 'Pizza', 'Plankalkül', 'Planner', 'Planning', 'Platforms', 'Plus', 'PortablE', 'Post Object Programming', 'PostScript', 'PowerBuilder – 4GL GUI applcation generator from Sybase', 'PowerPoint', 'PowerShell', 'Powerhouse', 'Presentation', 'Prioritizing', 'Pro*C', 'Problem Solving', 'Problem Solving Skills', 'Process Flows', 'Processing', 'Processing.js', 'Product Design', 'Product Development', 'Product Management', 'Product Reliability', 'Product Support', 'Product Training', 'Proficiency', 'Programming', 'Programming Languages', 'Programming Methodologies', 'Prograph', 'Project Management', 'Prolog', 'Promela', 'Promoting Additional Products and Services', 'Prototyping Methods', 'ProvideX', 'Pure', 'Python', 'P′′', 'Q', 'Q (equational programming language)', 'Q (programming language from Kx Systems)', 'QPL', 'Qalb', 'QtScript', 'QuakeC', 'Quality Assurance', 'Quality Conscious', 'Quality Control', 'Quantitative Reports', 'Quantitative Research', 'Questioning', 'R', 'R', 'R++', 'RAPID', 'REBOL', 'REFAL', 'REXX', 'ROOP', 'RPG', 'RPL', 'RSL', 'RTL/2', 'Racket', 'Rapira', 'Ratfiv', 'Ratfor', 'Red', 'Redcode', 'Redirecting Problems to Appropriate Resources', 'Refinishing', 'Reia', 'Relational Databases', 'Relational Programming', 'Reliability', 'Remodeling', 'Repairing', 'Repairs', 'Report Bugs', 'Reporting', 'Reporting Product Flaws to Appropriate Staff', 'Reporting Systems', 'Research', 'Resolve Customer Issues', 'Resolve Technical Issues', 'Respond to Email', 'Responsive Design', 'Restoration', 'Revision Control', 'Revolution', 'Rlab', 'Ruby', 'RuneScript', 'Rust', 'S', 'S', 'S-Lang', 'S-PLUS', 'S/SL', 'S2', 'S3', 'SA-C', 'SAIL', 'SALSA', 'SAM76', 'SAS', 'SASL', 'SBL', 'SETL', 'SIGNAL', 'SIMPOL', 'SIMSCRIPT', 'SISAL', 'SLIP', 'SMALL', 'SML', 'SNOBOL(SPITBOL)', 'SOL', 'SP/k', 'SPARK', 'SPIN', 'SPS', 'SQR', 'SR', 'SYMPL', 'SabreTalk', 'Sather', 'Sawzall', 'Scala', 'Scheduling', 'Scheme', 'Scilab', 'Scratch', 'Script.NET', 'Search Engine Optimization (SEO)', 'Second Level Support', 'Security', 'Sed', 'See also', 'Seed7', 'Self', 'Self Motivated', 'Self Starting', 'Self-Motivation', 'SenseTalk', 'SequenceL', 'Servers', 'SiMPLE', 'Simula', 'Simulink', 'Small Basic', 'Smalltalk', 'Snap!', 'Snowball', 'Social Media', 'Software', 'Software Development', 'Software Engineering', 'Software Installations', 'Software Quality Assurance (QA)', 'Software Support', 'Software Upgrades', 'Soliciting Customer Feedback to Improve Service', 'Solution Delivery', 'Sorting', 'Span', 'Speedcode', 'Spelling and Grammar', 'Squeak', 'Squirrel', 'Stackless Python', 'Starlogo', 'Stata', 'Stateflow', 'Statistical Analysis', 'Storage', 'Storyboards', 'Strand', 'Stress Management', 'Structured Query Language (SQL)', 'Structures', 'Style Guides', 'Subtext', 'SuperCollider', 'SuperTalk', 'Support', 'Support Systems', 'Swift (Apple programming language)', 'Swift (parallel scripting language)', 'Symbolic Programming', 'SyncCharts', 'System Architecture', 'System Design', 'System Development', 'System Programming', 'System Testing', 'SystemVerilog', 'Systems Analysis', 'Systems Software', 'T', 'T', 'T-SQL', 'TACL', 'TACPOL', 'TADS', 'TAL', 'TECO', 'TELCOMP', 'TEX', 'TIE', 'TMG, compiler-compiler', 'TOM', 'TPU', 'TTCN', 'TTM', 'TUTOR', 'TXL', 'Tablets', 'Tcl', 'TeX', 'Tea', 'Teaching Customers How to Work Around Product Limitations', 'Team Building', 'Team Oriented', 'Teamwork', 'Teamwork Skills', 'Tech Skills Listed by Job', 'Tech Support', 'Technical', 'Technical Aptitude', 'Technical Services', 'Technical Support', 'Technical Writing', 'Technology', 'Telephone Communication', 'Testing', 'Third Generation Languages', 'Ticketing Systems', 'Timber', 'Time Management', 'Time Management Skills', 'Tom', 'Tools', 'Topspeed', 'Touch Input Navigation', 'TouchDevelop', 'Trac', 'Training', 'Training Customers to Use Technology', 'Triage on Support Requests', 'Troubleshooting', 'Troubleshooting Tools', 'Turbo C++', 'Turing', 'TypeScript', 'Typing', 'U', 'UCSD Pascal', 'UNITY', 'UNIX', 'Ubercode', 'Umple', 'Unicon', 'Uniface', 'Unix shell', 'UnrealScript', 'Usability', 'Use Logical Reasoning', 'User Experience', 'User Experience Design', 'User Flows', 'User Interaction Diagrams', 'User Interface', 'User Research', 'User Testing', 'User-Centered Design', 'V', 'VBA', 'VBScript', 'VHDL', 'VSXu', 'Vala', 'Verbal Communications', 'Verilog', 'Virtualization', 'Visual Basic', 'Visual Basic .NET', 'Visual DataFlex', 'Visual Design', 'Visual DialogScript', 'Visual Fortran', 'Visual FoxPro', 'Visual J#', 'Visual J++', 'Visual Objects', 'Visual Prolog', 'W', 'WATFIV, WATFOR', 'Web', 'Web Analytics', 'Web Applications', 'Web Design', 'Web Development', 'Web Platforms', 'Web Services', 'Web Support', 'Web Technologies', 'WebDNA', 'WebQL', 'Winbatch', 'Window', 'Windowing Systems', 'Windows', 'Windows PowerShell', 'Wireframes', 'Wolfram Language', 'Work Independently', 'Working Independently', 'Working Odd Hours', 'Working Quickly', 'Workstations', 'Writing', 'Writing Clear and Concise Emails, Memos and Reports', 'Written Communications', 'Wyvern', 'X', 'X#', 'X++', 'X10', 'XBL', 'XC (exploits XMOS architecture)', 'XL', 'XOTcl', 'XPL', 'XPL0', 'XQuery', 'XSB', 'XSLT – see XPath', 'Xojo', 'Xtend', 'Y', 'YQL', 'Yorick', 'Z', 'Z notation', 'ZOPL', 'ZPL', 'Zeno', 'alytical', 'bc', 'chomski', 'csh', 'dBase', 'dc', 'es', 'iOS', 'ksh', 'make', 'ministrative Skills', 'nesC', 'o:XML', 'occam', 'occam-π', 'rc', 'rex', 'vvvv', 'xHarbour'
]
/* tslint:enable */

function updateLanguageList() {
  const size = 30
  const start = Math.round(Math.random() * (defaultLanguagesList.length - size))
  return defaultLanguagesList.slice(start, start + size)
}

interface AppState {
  search: string,
  languageList: string[],
  timer: number
}

namespace AppState {
  export const defaultState: AppState = {
    search: '',
    languageList: updateLanguageList(),
    timer: 0
  }
}

class App extends  React.Component<{ state: Atom<AppState> }, {}> {
  componentDidMount() {
    const { state } = this.props
    Observable
      .interval(1000)
      .subscribe(interval => {
        state.lens(x => x.timer).modify(x => x === 0 ? 5 : x - 1)
        if (interval % 6 === 0) state.lens(x => x.languageList).set(updateLanguageList())
      })
  }

  render() {
    const { state } = this.props
    const search = state.lens(x => x.search)
    return (
      <F.div>
        <F.input {...bind({ value: search })} />
        <F.div>Timer: {state.view(x => x.timer)}</F.div>
        {
          Atom.combine(search, state.lens(x => x.languageList), (searchValue, list) => (
            <div>
              {
                list
                  .filter(x => x.toLowerCase().includes(searchValue.toLowerCase()))
                  .map((x, i) => <li key={x + i}>{x}</li>)
              } 
            </div>
          ))
        }
      </F.div>
    )
  }
}

export default {
  Component: App,
  defaultState: AppState.defaultState
}
